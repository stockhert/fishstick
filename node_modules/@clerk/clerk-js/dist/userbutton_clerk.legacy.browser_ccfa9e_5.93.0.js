"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["270"],{37322:function(e,t,r){r.r(t),r.d(t,{UserButton:()=>b});var o=r(74328),n=r(69144),s=r(2672),i=r(84045),l=r(11576),a=r(64204),c=r(96352),d=r(83799),u=r(1151),p=r(53929),h=r(97295),C=r(49327),B=r(35241);let f=n.forwardRef((e,t)=>{let{close:r,...n}=e,s=()=>null==r?void 0:r(!1),{session:i}=(0,d.kP)(),c=(0,l.useUserButtonContext)(),{__experimental_asStandalone:f}=c,{authConfig:g}=(0,l.useEnvironment)(),{user:k}=(0,d.aF)(),{handleAddAccountClicked:m,handleManageAccountClicked:x,handleSessionClicked:v,handleSignOutAllClicked:Z,handleSignOutSessionClicked:b,handleUserProfileActionClicked:w,otherSessions:O}=(0,B.Z)({...c,actionCompleteCallback:s,user:k});return(0,o.tZ)(p.r,{elementDescriptor:a.descriptors.userButtonPopoverRootBox,children:(0,o.BX)(u.f.Root,{elementDescriptor:a.descriptors.userButtonPopoverCard,ref:t,role:"dialog","aria-label":"User button popover",shouldEntryAnimate:!f,...n,children:[(0,o.BX)(u.f.Content,{elementDescriptor:a.descriptors.userButtonPopoverMain,children:[(0,o.tZ)(h.E,{elementId:"userButton",user:k,sx:e=>({width:"100%",padding:"".concat(e.space.$4," ").concat(e.space.$5)})}),g.singleSessionMode?(0,o.tZ)(C.fB,{handleManageAccountClicked:x,handleSignOutSessionClicked:b,handleUserProfileActionClicked:w,session:i,completedCallback:s}):(0,o.tZ)(C.uj,{session:i,otherSessions:O,handleManageAccountClicked:x,handleSignOutSessionClicked:b,handleSessionClicked:v,handleAddAccountClicked:m,handleUserProfileActionClicked:w,completedCallback:s})]}),(0,o.tZ)(u.f.Footer,{elementDescriptor:a.descriptors.userButtonPopoverFooter,children:!g.singleSessionMode&&O.length>0&&(0,o.tZ)(C.gW,{handleSignOutAllClicked:Z})})]})})});var g=r(5472),k=r(77711),m=r(95878);let x=e=>{let{showName:t}=e,{user:r}=(0,d.aF)();return r&&t?(0,o.tZ)(a.Text,{variant:"subtitle",as:"span",elementDescriptor:a.descriptors.userButtonOuterIdentifier,sx:[e=>({paddingLeft:e.space.$2})],children:(0,m.Pp)(r)||(0,m.xC)(r)}):null},v=(0,k.C)((0,n.forwardRef)((e,t)=>{let{sx:r,...n}=e,{user:s}=(0,d.aF)(),{showName:i}=(0,l.useUserButtonContext)();return(0,o.tZ)(a.Button,{elementDescriptor:a.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:i?e.radii.$md:e.radii.$circle,color:e.colors.$colorForeground}),r],ref:t,"aria-label":"".concat(e.isOpen?"Close":"Open"," user button"),"aria-expanded":e.isOpen,"aria-haspopup":"dialog",...n,children:(0,o.BX)(a.Flex,{elementDescriptor:a.descriptors.userButtonBox,isOpen:e.isOpen,align:"center",as:"span",gap:2,children:[(0,o.tZ)(x,{showName:i}),(0,o.tZ)(g.Y,{boxElementDescriptor:a.descriptors.userButtonAvatarBox,imageElementDescriptor:a.descriptors.userButtonAvatarImage,...s,size:e=>e.sizes.$7})]})})})),Z=(0,s.withFloatingTree)(e=>{let{children:t}=e,{defaultOpen:r}=(0,l.useUserButtonContext)(),{floating:s,reference:a,styles:d,toggle:u,isOpen:p,nodeId:h,context:C}=(0,c.Sv)({defaultOpen:r,placement:"bottom-end",offset:8}),B=(0,n.useId)();return(0,o.BX)(o.HY,{children:[(0,o.tZ)(v,{ref:a,onClick:u,isOpen:p,"aria-controls":p?B:void 0,"aria-expanded":p}),(0,o.tZ)(i.J,{nodeId:h,context:C,isOpen:p,children:(0,n.cloneElement)(t,{id:B,close:u,ref:s,style:d})})]})}),b=(0,l.withCoreUserGuard)((0,s.withCardStateProvider)(()=>{let{__experimental_asStandalone:e}=(0,l.useUserButtonContext)();return(0,o.tZ)(a.Flow.Root,{flow:"userButton",sx:{display:"inline-flex"},children:e?(0,o.tZ)(f,{close:"function"==typeof e?e:void 0}):(0,o.tZ)(Z,{children:(0,o.tZ)(f,{})})})}))}}]);