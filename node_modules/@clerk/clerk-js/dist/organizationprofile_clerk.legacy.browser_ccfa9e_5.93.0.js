"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["554"],{51853:function(e,i,t){t.r(i),t.d(i,{OrganizationProfile:()=>eE,OrganizationProfileModal:()=>eF});var a=t(74328),n=t(83799),o=t(69144),l=t(2672),r=t(15579),s=t(23394),d=t(31673),c=t(11576),u=t(64204),g=t(24676),m=t(79281),p=t(17703);let h=e=>{let{organization:i}=(0,n.o8)(),{pages:t}=(0,c.useOrganizationProfileContext)(),o=(0,m.N2)(e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"})),l=(0,m.N2)(e=>e({permission:"org:sys_billing:read"})||e({permission:"org:sys_billing:manage"})),s=t.routes.filter(e=>e.id!==d.bm.MEMBERS||e.id===d.bm.MEMBERS&&o).filter(e=>e.id!==d.bm.BILLING||e.id===d.bm.BILLING&&l);return i?(0,a.BX)(r.Uh,{contentRef:e.contentRef,children:[(0,a.tZ)(r.l2,{title:(0,p.u1)("organizationProfile.navbar.title"),description:(0,p.u1)("organizationProfile.navbar.description"),routes:s,contentRef:e.contentRef}),e.children]}):null};t(50725);var v=t(94995),f=t(92654),z=t(35973),b=t(19655),Z=t(99805),P=t(44709),y=t(70431),S=t(19460),C=t(68487),_=t(67263),x=t(88870),K=t(36788),D=t(57484);let R=e=>{let i=(0,l.useCardState)(),{navigateAfterLeaveOrganization:t}=(0,c.useOrganizationProfileContext)(),{userMemberships:a,userInvitations:o}=(0,n.eW)({userMemberships:D.AO.userMemberships,userInvitations:D.AO.userInvitations});return()=>i.runAsync(async()=>{await (null==e?void 0:e())}).then(()=>{var e,i;null==(e=a.revalidate)||e.call(a),null==(i=o.revalidate)||i.call(o),t()})},B=e=>{let{organization:i}=(0,n.o8)(),{user:t}=(0,n.aF)(),o=R(()=>t.leaveOrganization(i.id));return i&&t?(0,a.tZ)(w,{organizationName:i.name,title:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),messageLine1:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine1"),messageLine2:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine2"),actionDescription:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.actionDescription",{organizationName:i.name}),submitLabel:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),successMessage:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.successMessage"),onConfirmation:o,...e}):null},T=e=>{let{organization:i,membership:t}=(0,n.o8)(),o=R(null==i?void 0:i.destroy);return i&&t?(0,a.tZ)(w,{organizationName:i.name,title:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),messageLine1:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine1"),messageLine2:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine2"),actionDescription:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.actionDescription",{organizationName:i.name}),submitLabel:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),successMessage:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.successMessage"),onConfirmation:o,...e}):null},w=(0,l.withCardStateProvider)(e=>{let{title:i,messageLine1:t,messageLine2:n,actionDescription:o,organizationName:r,successMessage:s,submitLabel:d,onSuccess:c,onReset:g,onConfirmation:p,colorScheme:h="danger"}=e,v=(0,m.a2)(),f=(0,l.useCardState)(),z=(0,K.Yp)("deleteOrganizationConfirmation","",{type:"text",label:o,isRequired:!0,placeholder:r}),b=!o||z.value===r,Z=async()=>{if(b)try{await p().then(()=>v.nextStep())}catch(e){(0,x.S3)(e,[],f.setError)}};return(0,a.BX)(m.en,{...v.props,children:[(0,a.tZ)(C.Y,{headerTitle:i,gap:1,children:(0,a.BX)(y.l.Root,{onSubmit:Z,children:[(0,a.BX)(u.Col,{children:[(0,a.tZ)(u.Text,{localizationKey:t,colorScheme:"secondary"}),(0,a.tZ)(u.Text,{localizationKey:n,colorScheme:"danger"})]}),(0,a.tZ)(y.l.ControlRow,{elementId:z.id,children:(0,a.tZ)(y.l.PlainInput,{...z.props})}),(0,a.BX)(S.K,{children:[(0,a.tZ)(y.l.SubmitButton,{block:!1,colorScheme:h,localizationKey:d,isDisabled:!b}),(0,a.tZ)(y.l.ResetButton,{localizationKey:(0,u.localizationKeys)("userProfile.formButtonReset"),block:!1,onClick:g})]})]})}),(0,a.tZ)(_.I,{title:i,text:s,onFinish:c})]})});t(65223);var I=t(12667),L=t(96352);t(28419),t(79876);var X=t(96519);let O=(0,l.withCardStateProvider)(e=>{let{domainId:i,mode:t="edit",onSuccess:r,onReset:s}=e,d=(0,l.useCardState)(),{organizationSettings:g}=(0,c.useEnvironment)(),{membership:p,organization:h,domains:v}=(0,n.o8)({domains:{infinite:!0}}),z="edit"===t,b=(()=>{let{organizationSettings:e}=(0,c.useEnvironment)(),i=[];return e.domains.enrollmentModes.includes("manual_invitation")&&i.push({value:"manual_invitation",label:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.manualInvitationOption__label"),description:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.manualInvitationOption__description")}),e.domains.enrollmentModes.includes("automatic_invitation")&&i.push({value:"automatic_invitation",label:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticInvitationOption__label"),description:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticInvitationOption__description")}),e.domains.enrollmentModes.includes("automatic_suggestion")&&i.push({value:"automatic_suggestion",label:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticSuggestionOption__label"),description:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticSuggestionOption__description")}),i})(),Z=(0,K.Yp)("enrollmentMode","",{type:"radio",radioOptions:b,isRequired:!0}),P=(0,K.Yp)("deleteExistingInvitationsSuggestions","",{label:(0,u.localizationKeys)("formFieldLabel__organizationDomainDeletePending"),type:"checkbox"}),{data:_,isLoading:D}=(0,L.ib)(null==h?void 0:h.getDomain,{domainId:i});(0,o.useEffect)(()=>{_&&Z.setValue(_.enrollmentMode)},[null==_?void 0:_.id]);let R=(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.title",{domain:(null==_?void 0:_.name)||""}),B=(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.subtitle",{domain:(null==_?void 0:_.name)||""}),T=((e,i)=>{let{infoLabel:t}=i,a=(null==e?void 0:e.totalPendingInvitations)||0;return 0===((null==e?void 0:e.totalPendingSuggestions)||0)+a?[]:[t,(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutInvitationCountLabel",{count:a}),(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutSuggestionCountLabel",{count:a})]})(_,{infoLabel:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutInfoLabel")}),w=async()=>{if(_&&h&&p&&v)try{await _.updateEnrollmentMode({enrollmentMode:Z.value,deletePending:P.checked}),await v.revalidate(),r()}catch(e){(0,x.S3)(e,[Z],d.setError)}};return h&&g?D||!_?(0,a.tZ)(u.Flex,{direction:"row",align:"center",justify:"center",sx:{height:"100%"},children:(0,a.tZ)(u.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:u.descriptors.spinner})}):(_.verification&&"verified"===_.verification.status||s(),(0,a.tZ)(C.Y,{headerTitle:R,headerSubtitle:z?void 0:B,gap:4,children:(0,a.BX)(u.Col,{gap:6,children:[T.length>0&&(0,a.tZ)(m.aX,{icon:X.I$,children:T.map((e,i)=>(0,a.tZ)(u.Text,{as:"span",sx:{display:"block"},localizationKey:e},i))}),(0,a.tZ)(f.h.Root,{children:(0,a.tZ)(f.h.Subtitle,{localizationKey:(0,u.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.subtitle"),variant:"subtitle"})}),(0,a.BX)(y.l.Root,{onSubmit:w,gap:6,children:[(0,a.tZ)(y.l.ControlRow,{elementId:Z.id,children:(0,a.tZ)(y.l.RadioGroup,{...Z.props})}),z&&"manual_invitation"===Z.value&&(0,a.tZ)(y.l.ControlRow,{elementId:P.id,children:(0,a.tZ)(y.l.Checkbox,{...P.props})}),(0,a.tZ)(S.A,{isDisabled:D||!_,onReset:s})]})]})})):null}),k=(0,l.withCardStateProvider)(e=>{var i;let{domainId:t,onSuccess:r,onReset:s,skipToVerified:d}=e,g=(0,l.useCardState)(),{organizationSettings:p}=(0,c.useEnvironment)(),{organization:h}=(0,n.o8)(),{data:v,isLoading:f}=(0,L.ib)(d||null==h?void 0:h.getDomain,{domainId:t}),z=(0,u.localizationKeys)("organizationProfile.verifyDomainPage.title"),b=(0,u.localizationKeys)("organizationProfile.verifyDomainPage.subtitle",{domainName:null!=(i=null==v?void 0:v.name)?i:""}),Z=(0,m.a2)({defaultStep:2*!!d,onNextStep:()=>g.setError(void 0)}),P=(0,K.Yp)("affiliationEmailAddress","",{type:"text",label:(0,u.localizationKeys)("formFieldLabel__organizationDomainEmailAddress"),placeholder:(0,u.localizationKeys)("formFieldInputPlaceholder__organizationDomainEmailAddress"),infoText:(0,u.localizationKeys)("formFieldLabel__organizationDomainEmailAddressDescription"),isRequired:!0}),_=(0,o.useRef)(),D=(0,u.localizationKeys)("organizationProfile.verifyDomainPage.subtitleVerificationCodeScreen",{emailAddress:_.current||""}),R=(0,I.e3)({onCodeEntryFinished:(e,i,t)=>{var a;null==v||null==(a=v.attemptAffiliationVerification)||a.call(v,{code:e}).then(async e=>{var t;await i(),(null==(t=e.verification)?void 0:t.status)==="verified"?Z.nextStep():null==r||r()}).catch(e=>t(e))},onResendCodeClicked:()=>{null==v||v.prepareAffiliationVerification({affiliationEmailAddress:P.value}).catch(e=>{(0,x.S3)(e,[P],g.setError)})}});if(!h||!p)return null;let B=h.name!==P.value,T="@".concat(null==v?void 0:v.name);return!f&&v||d?(0,a.BX)(m.en,{...Z.props,children:[(0,a.tZ)(C.Y,{headerTitle:z,headerSubtitle:b,children:(0,a.BX)(y.l.Root,{onSubmit:e=>{if(e.preventDefault(),v)return _.current="".concat(P.value).concat(T),v.prepareAffiliationVerification({affiliationEmailAddress:_.current}).then(Z.nextStep).catch(e=>{(0,x.S3)(e,[P],g.setError)})},children:[(0,a.tZ)(y.l.ControlRow,{elementId:P.id,children:(0,a.tZ)(y.l.InputGroup,{...P.props,autoFocus:!0,groupSuffix:T,ignorePasswordManager:!0})}),(0,a.tZ)(S.A,{isDisabled:!B,onReset:s})]})}),(0,a.BX)(C.Y,{headerTitle:z,headerSubtitle:D,children:[(0,a.tZ)(y.l.OTPInput,{...R,label:(0,u.localizationKeys)("organizationProfile.verifyDomainPage.formTitle"),description:(0,u.localizationKeys)("organizationProfile.verifyDomainPage.formSubtitle"),resendButton:(0,u.localizationKeys)("organizationProfile.verifyDomainPage.resendButton")}),(0,a.tZ)(S.K,{children:(0,a.tZ)(u.Button,{elementDescriptor:u.descriptors.formButtonReset,block:!1,variant:"ghost",textVariant:"buttonSmall",type:"reset",isDisabled:R.isLoading||"success"===R.otpControl.otpInputProps.feedbackType,onClick:()=>{R.otpControl.otpInputProps.clearFeedback(),R.otpControl.reset(),Z.prevStep()},localizationKey:(0,u.localizationKeys)("userProfile.formButtonReset")})})]}),(0,a.tZ)(O,{domainId:t,mode:"select",onSuccess:r,onReset:s})]}):(0,a.tZ)(u.Flex,{direction:"row",align:"center",justify:"center",children:(0,a.tZ)(u.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:u.descriptors.spinner})})}),$=(0,l.withCardStateProvider)(e=>{let{onSuccess:i,onReset:t}=e,{organizationSettings:r}=(0,c.useEnvironment)(),{domains:s}=(0,n.o8)({domains:{infinite:!0}}),d=(0,m.a2)({onNextStep:()=>b.setError(void 0)}),[g,p]=(0,o.useState)(""),[h,v]=(0,o.useState)(!1),f=(0,u.localizationKeys)("organizationProfile.createDomainPage.title"),z=(0,u.localizationKeys)("organizationProfile.createDomainPage.subtitle"),b=(0,l.useCardState)(),{organization:Z}=(0,n.o8)(),P=(0,K.Yp)("name","",{type:"text",label:(0,u.localizationKeys)("formFieldLabel__organizationDomain"),placeholder:(0,u.localizationKeys)("formFieldInputPlaceholder__organizationDomain")});if(!Z||!r)return null;let _=""!==P.value.trim();return(0,a.BX)(m.en,{...d.props,children:[(0,a.tZ)(C.Y,{headerTitle:f,headerSubtitle:z,children:(0,a.BX)(y.l.Root,{onSubmit:e=>(P.clearFeedback(),e.preventDefault(),Z.createDomain(P.value).then(async e=>{var i;p(e.id),null==s||null==(i=s.revalidate)||i.call(s),e.verification&&"verified"===e.verification.status&&v(!0),d.nextStep()}).catch(e=>{(0,x.S3)(e,[P],b.setError)})),children:[(0,a.tZ)(y.l.ControlRow,{elementId:P.id,children:(0,a.tZ)(y.l.PlainInput,{...P.props,autoFocus:!0,ignorePasswordManager:!0,isRequired:!0})}),(0,a.tZ)(S.A,{isDisabled:!_,onReset:t})]})}),(0,a.tZ)(k,{domainId:g,onSuccess:()=>{var e;null==s||null==(e=s.revalidate)||e.call(s),null==i||i()},skipToVerified:h,onReset:t})]})});var A=t(33009);let M={manual_invitation:(0,u.localizationKeys)("organizationProfile.badge__manualInvitation"),automatic_invitation:(0,u.localizationKeys)("organizationProfile.badge__automaticInvitation"),automatic_suggestion:(0,u.localizationKeys)("organizationProfile.badge__automaticSuggestion")},E=e=>{let{organizationDomain:i}=e;return i?i.verification&&"verified"===i.verification.status?(0,a.tZ)(u.Badge,{localizationKey:M[i.enrollmentMode],colorScheme:"manual_invitation"===i.enrollmentMode?"primary":"success"}):(0,a.tZ)(u.Badge,{localizationKey:(0,u.localizationKeys)("organizationProfile.badge__unverified"),colorScheme:"warning"}):null},F=e=>{var i;let{organizationSettings:t}=(0,c.useEnvironment)(),{organization:l}=(0,n.o8)(),{domainId:r,onSuccess:s,onReset:d}=e,g=o.useRef(),{data:h,isLoading:v}=(0,L.ib)(null==l?void 0:l.getDomain,{domainId:r},{onSuccess(e){g.current={...e}}}),{domains:f}=(0,n.o8)({domains:{infinite:!0}});return l&&t?v||!h?(0,a.tZ)(u.Flex,{direction:"row",align:"center",justify:"center",children:(0,a.tZ)(u.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:u.descriptors.spinner})}):(0,a.tZ)(m.LE,{title:(0,p.u1)("organizationProfile.removeDomainPage.title"),messageLine1:(0,p.u1)("organizationProfile.removeDomainPage.messageLine1",{domain:(null==(i=g.current)?void 0:i.name)||""}),messageLine2:(0,p.u1)("organizationProfile.removeDomainPage.messageLine2"),deleteResource:()=>null==h?void 0:h.delete().then(async()=>{var e;await (null==f||null==(e=f.revalidate)?void 0:e.call(f)),s()}),onSuccess:s,onReset:d}):null},q=e=>{let{close:i}=(0,P.XC)();return(0,a.tZ)(F,{onSuccess:i,onReset:i,...e})},N=e=>{let{close:i}=(0,P.XC)();return(0,a.tZ)(O,{onSuccess:i,onReset:i,...e})},V=e=>{let{close:i}=(0,P.XC)();return(0,a.tZ)(k,{onSuccess:i,onReset:i,skipToVerified:!1,...e})},Y=e=>{let{domain:i}=e,t=(e=>{let{open:i}=(0,P.XC)(),t=[];return e.verification&&"verified"===e.verification.status?t.push({label:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__manage"),onClick:()=>i("manage")}):t.push({label:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__verify"),onClick:()=>i("verify")}),t.push({label:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__remove"),isDestructive:!0,onClick:()=>i("remove")}),t})(i);return(0,a.tZ)(A.a,{actions:t})},j=(0,m.Ci)(e=>{let{verificationStatus:i,enrollmentMode:t,fallback:l,...r}=e,{organization:s,domains:d}=(0,n.o8)({domains:{infinite:!0,...r}}),{ref:c}=(0,L.YD)({threshold:0,onChange:e=>{if(e){var i;null==d||null==(i=d.fetchNext)||i.call(d)}}}),g=(0,o.useMemo)(()=>(null==d?void 0:d.data)?d.data.filter(e=>{let a=!0,n=!0;return i&&(a=!!e.verification&&e.verification.status===i),t&&(n=e.enrollmentMode===t),a&&n}):[],[null==d?void 0:d.data]);if(!s)return null;let p=(null==d?void 0:d.hasNextPage)||(null==d?void 0:d.isFetching);return 0!==g.length||(null==d?void 0:d.isLoading)||l?(0,a.BX)(b.zd.ItemList,{id:"organizationDomains",children:[0===g.length&&!(null==d?void 0:d.isLoading)&&l,g.map(e=>(0,a.BX)(Z.a.Root,{children:[(0,a.BX)(b.zd.Item,{id:"organizationDomains",hoverable:!0,children:[(0,a.BX)(u.Flex,{sx:e=>({gap:e.space.$1}),children:[(0,a.tZ)(u.Text,{children:e.name}),(0,a.tZ)(E,{organizationDomain:e})]}),(0,a.tZ)(m.Cv,{permission:"org:sys_domains:manage",children:(0,a.tZ)(Y,{domain:e})})]}),(0,a.tZ)(Z.a.Open,{value:"remove",children:(0,a.tZ)(Z.a.Card,{variant:"destructive",children:(0,a.tZ)(q,{domainId:e.id})})}),(0,a.tZ)(Z.a.Open,{value:"verify",children:(0,a.tZ)(Z.a.Card,{children:(0,a.tZ)(V,{domainId:e.id})})}),(0,a.tZ)(Z.a.Open,{value:"manage",children:(0,a.tZ)(Z.a.Card,{children:(0,a.tZ)(N,{domainId:e.id})})})]},e.id)),(0,a.tZ)(u.Box,{ref:(null==d?void 0:d.hasNextPage)&&!d.isFetching?c:void 0,sx:{visibility:"hidden"}}),p&&0===d.data.length&&(0,a.tZ)(u.Box,{sx:[e=>({width:"100%",height:e.space.$10,position:"relative"})],children:(0,a.tZ)(u.Box,{sx:{display:"flex",margin:"auto",position:"absolute",left:"50%",top:"50%",transform:"translateY(-50%) translateX(-50%)"},children:(0,a.tZ)(u.Spinner,{size:"sm",colorScheme:"primary",elementDescriptor:u.descriptors.spinner})})})]}):null},{permission:"org:sys_domains:read"});var H=t(10278),W=t(8181);let U=(0,l.withCardStateProvider)(e=>{let{onSuccess:i,onReset:t}=e,o=(0,u.localizationKeys)("organizationProfile.profilePage.title"),r=(0,l.useCardState)(),{organization:s}=(0,n.o8)(),d=(0,K.Yp)("name",(null==s?void 0:s.name)||"",{type:"text",label:(0,u.localizationKeys)("formFieldLabel__organizationName"),placeholder:(0,u.localizationKeys)("formFieldInputPlaceholder__organizationName")}),c=(0,K.Yp)("slug",(null==s?void 0:s.slug)||"",{type:"text",label:(0,u.localizationKeys)("formFieldLabel__organizationSlug"),placeholder:(0,u.localizationKeys)("formFieldInputPlaceholder__organizationSlug")});if(!s)return null;let g=(s.name!==d.value||s.slug!==c.value)&&"error"!==c.feedbackType,m=async e=>(e.preventDefault(),(g?s.update({name:d.value,slug:c.value}):Promise.resolve()).then(i).catch(e=>{(0,x.S3)(e,[d,c],r.setError)}));return(0,a.tZ)(C.Y,{headerTitle:o,children:(0,a.BX)(y.l.Root,{onSubmit:m,children:[(0,a.tZ)(W.D,{organization:s,onAvatarChange:e=>s.setLogo({file:e}).then(()=>{r.setIdle()}).catch(e=>(0,x.S3)(e,[],r.setError)),onAvatarRemove:(0,H.QO)(s.imageUrl)?null:()=>{s.setLogo({file:null}).then(()=>{r.setIdle()}).catch(e=>(0,x.S3)(e,[],r.setError))}}),(0,a.tZ)(y.l.ControlRow,{elementId:d.id,children:(0,a.tZ)(y.l.PlainInput,{...d.props,autoFocus:!0,isRequired:!0,ignorePasswordManager:!0})}),(0,a.tZ)(y.l.ControlRow,{elementId:c.id,children:(0,a.tZ)(y.l.PlainInput,{...c.props,onChange:e=>{var i;i=e.target.value,c.setValue(i),c.clearFeedback()},ignorePasswordManager:!0})}),(0,a.tZ)(S.A,{isDisabled:!g,onReset:t})]})})}),Q=()=>{let{close:e}=(0,P.XC)();return(0,a.tZ)(U,{onSuccess:e,onReset:e})},G=()=>{let{close:e}=(0,P.XC)();return(0,a.tZ)($,{onSuccess:e,onReset:e})},J=()=>{let{close:e}=(0,P.XC)();return(0,a.tZ)(B,{onSuccess:e,onReset:e})},ee=()=>{let{close:e}=(0,P.XC)();return(0,a.tZ)(T,{onSuccess:e,onReset:e})},ei=()=>(0,a.tZ)(u.Col,{elementDescriptor:u.descriptors.page,sx:e=>({gap:e.space.$8}),children:(0,a.BX)(u.Col,{elementDescriptor:u.descriptors.profilePage,elementId:u.descriptors.profilePage.setId("organizationGeneral"),children:[(0,a.tZ)(f.h.Root,{children:(0,a.tZ)(f.h.Title,{localizationKey:(0,u.localizationKeys)("organizationProfile.start.headerTitle__general"),sx:e=>({marginBottom:e.space.$4}),textVariant:"h2"})}),(0,a.tZ)(et,{}),(0,a.tZ)(m.Cv,{permission:"org:sys_domains:read",children:(0,a.tZ)(ea,{})}),(0,a.tZ)(en,{}),(0,a.tZ)(eo,{})]})}),et=()=>{let{organization:e}=(0,n.o8)();if(!e)return null;let i=(0,a.tZ)(z.Z,{size:"lg",mainIdentifierVariant:"subtitle",organization:e});return(0,a.tZ)(b.zd.Root,{title:(0,u.localizationKeys)("organizationProfile.start.profileSection.title"),id:"organizationProfile",children:(0,a.BX)(Z.a.Root,{children:[(0,a.tZ)(m.Cv,{permission:"org:sys_profile:manage",fallback:i,children:(0,a.tZ)(Z.a.Closed,{value:"edit",children:(0,a.BX)(b.zd.Item,{id:"organizationProfile",children:[i,(0,a.tZ)(Z.a.Trigger,{value:"edit",children:(0,a.tZ)(b.zd.Button,{id:"organizationProfile",localizationKey:(0,u.localizationKeys)("organizationProfile.start.profileSection.primaryButton")})})]})})}),(0,a.tZ)(Z.a.Open,{value:"edit",children:(0,a.tZ)(Z.a.Card,{children:(0,a.tZ)(Q,{})})})]})})},ea=()=>{let{organizationSettings:e}=(0,c.useEnvironment)(),{organization:i}=(0,n.o8)();return e&&i&&e.domains.enabled?(0,a.tZ)(b.zd.Root,{title:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.title"),id:"organizationDomains",centered:!1,children:(0,a.BX)(Z.a.Root,{children:[(0,a.tZ)(j,{}),(0,a.BX)(m.Cv,{permission:"org:sys_domains:manage",children:[(0,a.tZ)(Z.a.Trigger,{value:"add",children:(0,a.BX)(u.Col,{children:[(0,a.tZ)(b.zd.ArrowButton,{localizationKey:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.primaryButton"),id:"organizationDomains"}),(0,a.tZ)(u.Text,{localizationKey:(0,u.localizationKeys)("organizationProfile.profilePage.domainSection.subtitle"),sx:e=>({paddingLeft:e.space.$9}),colorScheme:"secondary"})]})}),(0,a.tZ)(Z.a.Open,{value:"add",children:(0,a.tZ)(Z.a.Card,{children:(0,a.tZ)(G,{})})})]})]})}):null},en=()=>{let{organization:e}=(0,n.o8)();return e?(0,a.tZ)(b.zd.Root,{id:"organizationDanger",title:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),children:(0,a.BX)(Z.a.Root,{children:[(0,a.tZ)(Z.a.Closed,{value:"leave",children:(0,a.tZ)(b.zd.Item,{sx:e=>({paddingTop:0,paddingBottom:0,paddingLeft:e.space.$1}),id:"organizationDanger",children:(0,a.tZ)(Z.a.Trigger,{value:"leave",children:(0,a.tZ)(b.zd.Button,{id:"organizationDanger",variant:"ghost",colorScheme:"danger",textVariant:"buttonLarge",localizationKey:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title")})})})}),(0,a.tZ)(Z.a.Open,{value:"leave",children:(0,a.tZ)(Z.a.Card,{variant:"destructive",children:(0,a.tZ)(J,{})})})]})}):null},eo=()=>{let{organization:e}=(0,n.o8)(),i=(0,m.N2)({permission:"org:sys_profile:delete"});if(!e)return null;let t=e.adminDeleteEnabled;return i&&t?(0,a.tZ)(b.zd.Root,{id:"organizationDanger",title:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),sx:e=>({marginBottom:e.space.$4}),children:(0,a.BX)(Z.a.Root,{children:[(0,a.tZ)(Z.a.Closed,{value:"delete",children:(0,a.tZ)(b.zd.Item,{sx:e=>({paddingTop:0,paddingBottom:0,paddingLeft:e.space.$1}),id:"organizationDanger",children:(0,a.tZ)(Z.a.Trigger,{value:"delete",children:(0,a.tZ)(b.zd.Button,{id:"organizationDanger",variant:"ghost",colorScheme:"danger",textVariant:"buttonLarge",localizationKey:(0,u.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title")})})})}),(0,a.tZ)(Z.a.Open,{value:"delete",children:(0,a.tZ)(Z.a.Card,{variant:"destructive",children:(0,a.tZ)(ee,{})})})]})}):null};var el=t(36781),er=t(92418),es=t(36148),ed=t(51217),ec=t(97295),eu=t(13559),eg=t(93266),em=t(90408);let ep=e=>{let{memberships:i,pageSize:t}=e,o=(0,l.useCardState)(),{organization:r}=(0,n.o8)(),{options:s,isLoading:d}=(0,eg.e)();return r?(0,a.tZ)(em.wQ,{page:(null==i?void 0:i.page)||1,onPageChange:e=>{var t;return null==i||null==(t=i.fetchPage)?void 0:t.call(i,e)},itemCount:(null==i?void 0:i.count)||0,pageCount:(null==i?void 0:i.pageCount)||0,itemsPerPage:t,isLoading:(null==i?void 0:i.isLoading)&&!(null==i?void 0:i.data.length)||d,emptyStateLocalizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.detailsTitle__emptyRow"),headers:[(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__joined"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==i?void 0:i.data)||[]).map(e=>(0,a.tZ)(eh,{membership:e,options:s,onRoleChange:i=>o.runAsync(()=>e.update({role:i})).catch(e=>(0,x.S3)(e,[],o.setError)),onRemove:async()=>o.runAsync(async()=>{var t;let a=await e.destroy();return await (null==i||null==(t=i.revalidate)?void 0:t.call(i)),a}).catch(e=>(0,x.S3)(e,[],o.setError))},e.id))}):null},eh=e=>{var i,t,o;let{membership:r,onRemove:s,onRoleChange:d,options:c}=e,{localizeCustomRole:g}=(0,eg.q)(),m=(0,l.useCardState)(),{user:p}=(0,n.aF)(),h=(null==p?void 0:p.id)===(null==(i=r.publicUserData)?void 0:i.userId),v=null==c||null==(t=c.find(e=>e.value===r.role))?void 0:t.label;return(0,a.BX)(em.RN,{children:[(0,a.tZ)(u.Td,{children:(0,a.tZ)(ec.E,{sx:{maxWidth:"30ch"},user:r.publicUserData,subtitle:null==(o=r.publicUserData)?void 0:o.identifier,badge:h&&(0,a.tZ)(u.Badge,{localizationKey:(0,u.localizationKeys)("badge__you")})})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(u.Box,{as:"span",elementDescriptor:u.descriptors.formattedDate,elementId:u.descriptors.formattedDate.setId("tableCell"),children:r.createdAt.toLocaleDateString()})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(eu.Cv,{permission:"org:sys_memberships:manage",fallback:(0,a.tZ)(u.Text,{sx:e=>({opacity:e.opacity.$inactive}),children:g(r.role)||v}),children:(0,a.tZ)(em.DQ,{isDisabled:m.isLoading||!d,value:r.role,fallbackLabel:r.roleName,onChange:d,roles:c})})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(eu.Cv,{permission:"org:sys_memberships:manage",children:(0,a.tZ)(A.a,{actions:[{label:(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.menuAction__remove"),isDestructive:!0,onClick:s,isDisabled:h}],elementId:"member"})})})]})};var ev=t(45727);let ef=e=>{let{actionSlot:i}=e,t=(0,m.N2)({permission:"org:sys_memberships:manage"});return(0,a.BX)(Z.a.Root,{animate:!1,children:[(0,a.tZ)(el.f,{asChild:!0,children:(0,a.BX)(u.Flex,{justify:i?"between":"end",sx:e=>({width:"100%",marginLeft:"auto",padding:"".concat(e.space.$none," ").concat(e.space.$1)}),gap:i?2:void 0,children:[i,t&&(0,a.tZ)(Z.a.Trigger,{value:"invite",hideOnActive:!i,children:(0,a.tZ)(u.Button,{elementDescriptor:u.descriptors.membersPageInviteButton,"aria-label":"Invite",localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.action__invite")})})]})}),t&&(0,a.tZ)(el.f,{children:(0,a.tZ)(Z.a.Open,{value:"invite",children:(0,a.tZ)(u.Flex,{sx:e=>({paddingBottom:e.space.$6,padding:"".concat(e.space.$none," ").concat(e.space.$1," ").concat(e.space.$6," ").concat(e.space.$1)}),children:(0,a.tZ)(Z.a.Card,{sx:{width:"100%"},children:(0,a.tZ)(ev.N,{})})})})})]})};var ez=t(932);let eb=()=>{let{organization:e}=(0,n.o8)(),{__unstable_manageBillingUrl:i,__unstable_manageBillingLabel:t,__unstable_manageBillingMembersLimit:o}=(0,c.useOrganizationProfileContext)(),l=(0,g.useRouter)();if(!e)return null;let r=(null==e?void 0:e.membersCount)+(null==e?void 0:e.pendingInvitationsCount),s=(0,H.OR)(o);return(0,a.tZ)(u.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$2,borderRadius:e.radii.$md,gap:e.space.$4}),children:(0,a.BX)(u.Flex,{align:"center",sx:e=>({[ed.mqu.sm]:{gap:e.space.$3},gap:e.space.$2}),children:[s>0&&(0,a.tZ)(ez.a,{limit:s,value:r,size:"xs"}),(0,a.BX)(u.Flex,{sx:e=>({[ed.mqu.sm]:{flexDirection:"column"},gap:e.space.$0x5}),children:[(0,a.BX)(u.Text,{children:["You can invite ",o?"up to ".concat(s):"unlimited"," members."]}),s>0&&(0,a.BX)(u.Link,{sx:e=>({fontWeight:e.fontWeights.$medium}),variant:"body",onClick:()=>l.navigate((0,H.OR)(i)),children:[(0,H.OR)(t)||"Manage billing",(0,a.tZ)(u.Icon,{icon:X.LZ})]})]})]})})};var eZ=t(81319),eP=t(30215);let ey=e=>{var i;let{query:t,value:n,memberships:l,onSearchChange:r,onQueryTrigger:s}=e,{t:d}=(0,u.useLocalizations)(),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{var e,i;t&&(null==l?void 0:l.data)&&(null!=(e=null==l?void 0:l.count)?e:0)<=ew&&(null==l||null==(i=l.fetchPage)||i.call(l,1))},[t,l]);let g=n&&!!(null==l?void 0:l.isLoading)&&!!(null==(i=l.data)?void 0:i.length);return(0,a.tZ)(el.f,{asChild:!0,children:(0,a.tZ)(u.Flex,{sx:{width:"50%",[ed.mqu.sm]:{width:"auto"}},children:(0,a.tZ)(eZ.W,{value:n,type:"search",autoCapitalize:"none",spellCheck:!1,"aria-label":"Search",placeholder:d((0,u.localizationKeys)("organizationProfile.membersPage.action__search")),leftIcon:g?(0,a.tZ)(eP.$j,{size:"xs"}):(0,a.tZ)(u.Icon,{icon:X.Yt,elementDescriptor:u.descriptors.organizationProfileMembersSearchInputIcon,sx:e=>({color:e.colors.$colorMutedForeground})}),onKeyUp:function(){c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{s(n.trim())},500)},onChange:e=>{let i=e.target.value;r(i),""===i&&s(i)},elementDescriptor:u.descriptors.organizationProfileMembersSearchInput})})})},eS={invitations:{pageSize:10,keepPreviousData:!0}},eC=()=>{let e=(0,l.useCardState)(),{organization:i,invitations:t}=(0,n.o8)(eS),{options:o,isLoading:r}=(0,eg.e)();return i?(0,a.tZ)(em.wQ,{page:(null==t?void 0:t.page)||1,onPageChange:(null==t?void 0:t.fetchPage)||(()=>null),itemCount:(null==t?void 0:t.count)||0,pageCount:(null==t?void 0:t.pageCount)||0,itemsPerPage:eS.invitations.pageSize,isLoading:(null==t?void 0:t.isLoading)||r,emptyStateLocalizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.invitationsTab.table__emptyRow"),headers:[(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,u.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.tableHeader__invited"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==t?void 0:t.data)||[]).map(i=>(0,a.tZ)(e_,{options:o,invitation:i,onRevoke:async()=>e.runAsync(async()=>{var e;return await i.revoke(),await (null==t||null==(e=t.revalidate)?void 0:e.call(t)),i}).catch(i=>(0,x.S3)(i,[],e.setError))},i.id))}):null},e_=e=>{var i;let{invitation:t,onRevoke:n,options:o}=e,{localizeCustomRole:l}=(0,eg.q)(),r=null==o||null==(i=o.find(e=>e.value===t.role))?void 0:i.label;return(0,a.BX)(em.RN,{children:[(0,a.tZ)(u.Td,{children:(0,a.tZ)(ec.E,{sx:{maxWidth:"30ch"},user:{primaryEmailAddress:{emailAddress:t.emailAddress}}})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(u.Box,{as:"span",elementDescriptor:u.descriptors.formattedDate,elementId:u.descriptors.formattedDate.setId("tableCell"),children:t.createdAt.toLocaleDateString()})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(u.Text,{colorScheme:"secondary",localizationKey:l(t.role)||r})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(A.a,{actions:[{label:(0,u.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.menuAction__revoke"),isDestructive:!0,onClick:n}],elementId:"invitation"})})]})},ex=(0,l.withCardStateProvider)(()=>{var e;let{organizationSettings:i}=(0,c.useEnvironment)(),{__unstable_manageBillingUrl:t,navigateToGeneralPageRoot:n}=(0,c.useOrganizationProfileContext)(),o=null==i||null==(e=i.domains)?void 0:e.enabled;return(0,a.BX)(u.Col,{gap:4,sx:{width:"100%"},children:[t&&(0,a.tZ)(eb,{}),o&&(0,a.tZ)(m.Cv,{permission:"org:sys_domains:manage",children:(0,a.BX)(u.Flex,{sx:e=>({width:"100%",gap:e.space.$8,paddingBottom:e.space.$4,paddingLeft:e.space.$1,paddingRight:e.space.$1,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$borderAlpha100,[ed.mqu.md]:{flexDirection:"column",gap:e.space.$2}}),children:[(0,a.tZ)(u.Col,{sx:e=>({width:e.space.$66,marginTop:e.space.$2}),children:(0,a.tZ)(f.h.Root,{children:(0,a.tZ)(f.h.Title,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.headerTitle"),textVariant:"h3"})})}),(0,a.tZ)(u.Col,{sx:{width:"100%"},children:(0,a.tZ)(j,{fallback:(0,a.BX)(a.HY,{children:[(0,a.tZ)(b.zd.ArrowButton,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.primaryButton"),id:"manageVerifiedDomains",sx:e=>({gap:e.space.$2}),onClick:n}),(0,a.tZ)(u.Text,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.headerSubtitle"),sx:e=>({paddingLeft:e.space.$10,color:e.colors.$colorMutedForeground,[ed.mqu.md]:{paddingLeft:0}})})]}),verificationStatus:"verified",enrollmentMode:"automatic_invitation"})})]})}),(0,a.BX)(u.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,a.tZ)(ef,{}),(0,a.tZ)(eC,{})]})]})}),eK={membershipRequests:{pageSize:10,keepPreviousData:!0}},eD=()=>{var e;let i=(0,l.useCardState)(),{organization:t,membershipRequests:o}=(0,n.o8)(eK);return t?(0,a.tZ)(em.wQ,{page:(null==o?void 0:o.page)||1,onPageChange:null!=(e=null==o?void 0:o.fetchPage)?e:()=>null,itemCount:(null==o?void 0:o.count)||0,pageCount:(null==o?void 0:o.pageCount)||0,itemsPerPage:eK.membershipRequests.pageSize,isLoading:null==o?void 0:o.isLoading,emptyStateLocalizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.table__emptyRow"),headers:[(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.tableHeader__requested"),(0,u.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==o?void 0:o.data)||[]).map(e=>(0,a.tZ)(eR,{request:e,onError:i.setError},e.id))}):null},eR=(0,l.withCardStateProvider)(e=>{let{request:i,onError:t}=e,o=(0,l.useCardState)(),{membership:r,membershipRequests:s}=(0,n.o8)(eK);return(0,a.BX)(em.RN,{children:[(0,a.tZ)(u.Td,{children:(0,a.tZ)(ec.E,{sx:{maxWidth:"30ch"},showAvatar:!1,user:{primaryEmailAddress:{emailAddress:i.publicUserData.identifier}}})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(u.Box,{as:"span",elementDescriptor:u.descriptors.formattedDate,elementId:u.descriptors.formattedDate.setId("tableCell"),children:i.createdAt.toLocaleDateString()})}),(0,a.tZ)(u.Td,{children:(0,a.tZ)(eB,{onAccept:()=>{if(r&&s)return o.runAsync(async()=>{await i.accept(),await s.revalidate()},"accept").catch(e=>(0,x.S3)(e,[],t))},onReject:()=>{if(r&&s)return o.runAsync(async()=>{await i.reject(),await s.revalidate()},"reject").catch(e=>(0,x.S3)(e,[],t))}})})]})}),eB=e=>{let i=(0,l.useCardState)();return(0,a.BX)(u.Flex,{gap:2,children:[(0,a.tZ)(u.Button,{textVariant:"buttonSmall",variant:"ghost",isLoading:i.isLoading&&"reject"===i.loadingMetadata,isDisabled:i.isLoading&&"reject"!==i.loadingMetadata,onClick:e.onReject,localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.menuAction__reject")}),(0,a.tZ)(u.Button,{textVariant:"buttonSmall",isLoading:i.isLoading&&"accept"===i.loadingMetadata,isDisabled:i.isLoading&&"accept"!==i.loadingMetadata,onClick:e.onAccept,localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.menuAction__approve")})]})},eT=()=>{var e;let{organizationSettings:i}=(0,c.useEnvironment)(),{__unstable_manageBillingUrl:t,navigateToGeneralPageRoot:n}=(0,c.useOrganizationProfileContext)(),o=null==i||null==(e=i.domains)?void 0:e.enabled;return(0,a.BX)(u.Col,{gap:4,sx:{width:"100%"},children:[t&&(0,a.tZ)(eb,{}),o&&(0,a.tZ)(m.Cv,{permission:"org:sys_domains:manage",children:(0,a.BX)(u.Flex,{sx:e=>({width:"100%",gap:e.space.$8,paddingBottom:e.space.$4,paddingLeft:e.space.$1,paddingRight:e.space.$1,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$borderAlpha100,[ed.mqu.md]:{flexDirection:"column",gap:e.space.$2}}),children:[(0,a.tZ)(u.Col,{sx:e=>({width:e.space.$66,marginTop:e.space.$2}),children:(0,a.tZ)(f.h.Root,{children:(0,a.tZ)(f.h.Title,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.headerTitle"),textVariant:"h3"})})}),(0,a.tZ)(u.Col,{sx:{width:"100%"},children:(0,a.tZ)(j,{fallback:(0,a.BX)(a.HY,{children:[(0,a.tZ)(b.zd.ArrowButton,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.primaryButton"),sx:e=>({gap:e.space.$2}),id:"manageVerifiedDomains",onClick:n}),(0,a.tZ)(u.Text,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.headerSubtitle"),sx:e=>({paddingLeft:e.space.$10,color:e.colors.$colorMutedForeground,[ed.mqu.md]:{paddingLeft:0}})})]}),verificationStatus:"verified",enrollmentMode:"automatic_suggestion"})})]})}),(0,a.BX)(u.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,a.tZ)(ef,{}),(0,a.tZ)(eD,{})]})]})},ew=10,eI=(0,l.withCardStateProvider)(()=>{var e;let{organizationSettings:i}=(0,c.useEnvironment)(),t=(0,l.useCardState)(),r=(0,m.N2)({permission:"org:sys_memberships:manage"}),s=(0,m.N2)({permission:"org:sys_memberships:read"}),d=(null==i||null==(e=i.domains)?void 0:e.enabled)&&r,[g,p]=(0,o.useState)(""),[h,v]=(0,o.useState)(""),{membershipRequests:z,memberships:b,invitations:P}=(0,n.o8)({membershipRequests:d||void 0,invitations:r||void 0,memberships:s?{keepPreviousData:!0,query:g||void 0}:void 0}),{__unstable_manageBillingUrl:y}=(0,c.useOrganizationProfileContext)();return null===r?null:(0,a.tZ)(u.Col,{elementDescriptor:u.descriptors.page,gap:2,children:(0,a.tZ)(u.Col,{elementDescriptor:u.descriptors.profilePage,elementId:u.descriptors.profilePage.setId("organizationMembers"),gap:4,children:(0,a.BX)(Z.a.Root,{animate:!1,children:[(0,a.tZ)(el.f,{asChild:!0,children:(0,a.tZ)(f.h.Root,{contentSx:{[ed.mqu.md]:{flexDirection:"row",width:"100%",justifyContent:"space-between"}},children:(0,a.tZ)(f.h.Title,{localizationKey:(0,u.localizationKeys)("organizationProfile.start.headerTitle__members"),textVariant:"h2"})})}),(0,a.tZ)(er.Z.Alert,{children:t.error}),(0,a.BX)(es.mQ,{children:[(0,a.BX)(es.dr,{sx:e=>({gap:e.space.$2}),children:[s&&(0,a.tZ)(es.OK,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.start.headerTitle__members"),children:!!(null==b?void 0:b.count)&&(0,a.tZ)(m.dN,{shouldAnimate:!g,notificationCount:b.count,colorScheme:"outline"})}),r&&(0,a.tZ)(es.OK,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.start.headerTitle__invitations"),children:(null==P?void 0:P.data)&&!P.isLoading&&(0,a.tZ)(m.dN,{notificationCount:P.count,colorScheme:"outline"})}),r&&d&&(0,a.tZ)(es.OK,{localizationKey:(0,u.localizationKeys)("organizationProfile.membersPage.start.headerTitle__requests"),children:(null==z?void 0:z.data)&&!z.isLoading&&(0,a.tZ)(m.dN,{notificationCount:z.count,colorScheme:"outline"})})]}),(0,a.BX)(es.nP,{children:[s&&(0,a.tZ)(es.x4,{sx:{width:"100%"},children:(0,a.BX)(u.Flex,{gap:4,direction:"col",sx:{width:"100%"},children:[r&&y&&(0,a.tZ)(eb,{}),(0,a.BX)(u.Flex,{gap:2,direction:"col",sx:{width:"100%"},children:[(0,a.tZ)(ef,{actionSlot:(0,a.tZ)(ey,{query:g,value:h,memberships:b,onSearchChange:e=>v(e),onQueryTrigger:e=>p(e)})}),(0,a.tZ)(ep,{pageSize:ew,memberships:b})]})]})}),r&&(0,a.tZ)(es.x4,{sx:{width:"100%"},children:(0,a.tZ)(ex,{})}),r&&d&&(0,a.tZ)(es.x4,{sx:{width:"100%"},children:(0,a.tZ)(eT,{})})]})]})]})})})}),eL=(0,o.lazy)(()=>Promise.all([t.e("573"),t.e("645"),t.e("294"),t.e("916")]).then(t.bind(t,14961)).then(e=>({default:e.OrganizationBillingPage}))),eX=(0,o.lazy)(()=>Promise.all([t.e("573"),t.e("616"),t.e("150")]).then(t.bind(t,53879)).then(e=>({default:e.OrganizationAPIKeysPage}))),eO=(0,o.lazy)(()=>Promise.all([t.e("573"),t.e("66"),t.e("511")]).then(t.bind(t,88758)).then(e=>({default:e.OrganizationPlansPage}))),ek=(0,o.lazy)(()=>Promise.all([t.e("573"),t.e("645"),t.e("177")]).then(t.bind(t,29181)).then(e=>({default:e.OrganizationStatementPage}))),e$=(0,o.lazy)(()=>Promise.all([t.e("573"),t.e("711")]).then(t.bind(t,8317)).then(e=>({default:e.OrganizationPaymentAttemptPage}))),eA=()=>{var e;let{pages:i,isMembersPageRoot:t,isGeneralPageRoot:n,isBillingPageRoot:l,isApiKeysPageRoot:r,shouldShowBilling:s}=(0,c.useOrganizationProfileContext)(),{apiKeysSettings:d,commerceSettings:u}=(0,c.useEnvironment)(),p=null==(e=i.contents)?void 0:e.map((e,i)=>{let o=!n&&!t&&0===i;return(0,a.tZ)(g.Route,{index:o,path:o?void 0:e.url,children:(0,a.tZ)(v.O,{mount:e.mount,unmount:e.unmount})},"custom-page-".concat(e.url))});return(0,a.BX)(g.Switch,{children:[p,(0,a.BX)(g.Route,{children:[(0,a.tZ)(g.Route,{path:n?void 0:"organization-general",children:(0,a.tZ)(g.Switch,{children:(0,a.tZ)(g.Route,{index:!0,children:(0,a.tZ)(ei,{})})})}),(0,a.tZ)(g.Route,{path:t?void 0:"organization-members",children:(0,a.tZ)(g.Switch,{children:(0,a.tZ)(g.Route,{index:!0,children:(0,a.tZ)(m.Cv,{condition:e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"}),redirectTo:n?"../":"./organization-general",children:(0,a.tZ)(eI,{})})})})}),u.billing.organization.enabled&&s?(0,a.tZ)(m.Cv,{condition:e=>e({permission:"org:sys_billing:read"})||e({permission:"org:sys_billing:manage"}),children:(0,a.tZ)(g.Route,{path:l?void 0:"organization-billing",children:(0,a.BX)(g.Switch,{children:[(0,a.tZ)(g.Route,{index:!0,children:(0,a.tZ)(o.Suspense,{fallback:"",children:(0,a.tZ)(eL,{})})}),u.billing.organization.hasPaidPlans?(0,a.tZ)(g.Route,{path:"plans",children:(0,a.tZ)(o.Suspense,{fallback:"",children:(0,a.tZ)(eO,{})})}):null,(0,a.tZ)(g.Route,{path:"statement/:statementId",children:(0,a.tZ)(o.Suspense,{fallback:"",children:(0,a.tZ)(ek,{})})}),(0,a.tZ)(g.Route,{path:"payment-attempt/:paymentAttemptId",children:(0,a.tZ)(o.Suspense,{fallback:"",children:(0,a.tZ)(e$,{})})})]})})}):null,d.enabled&&(0,a.tZ)(m.Cv,{condition:e=>e({permission:"org:sys_api_keys:read"})||e({permission:"org:sys_api_keys:manage"}),children:(0,a.tZ)(g.Route,{path:r?void 0:"organization-api-keys",children:(0,a.tZ)(g.Switch,{children:(0,a.tZ)(g.Route,{index:!0,children:(0,a.tZ)(o.Suspense,{fallback:"",children:(0,a.tZ)(eX,{})})})})})})]})]})},eM=(0,c.withCoreUserGuard)(()=>{let e=o.useRef(null);return(0,a.tZ)(s.P.Root,{sx:e=>({display:"grid",gridTemplateColumns:"1fr 3fr",height:e.sizes.$176,overflow:"hidden"}),children:(0,a.BX)(h,{contentRef:e,children:[(0,a.tZ)(r.ap,{navbarTitleLocalizationKey:(0,u.localizationKeys)("organizationProfile.navbar.title")}),(0,a.tZ)(s.P.Content,{contentRef:e,scrollBoxId:d.aw,children:(0,a.tZ)(eA,{})})]})})}),eE=(0,l.withCardStateProvider)(e=>{let{organization:i}=(0,n.o8)();return i?(0,a.tZ)(u.Flow.Root,{flow:"organizationProfile",children:(0,a.tZ)(u.Flow.Part,{children:(0,a.tZ)(g.Switch,{children:(0,a.tZ)(g.Route,{children:(0,a.tZ)(c.SubscriberTypeContext.Provider,{value:"organization",children:(0,a.tZ)(eM,{})})})})})}):null}),eF=e=>{let i={...e,routing:"virtual",componentName:"OrganizationProfile",mode:"modal"};return(0,a.tZ)(g.Route,{path:"organizationProfile",children:(0,a.tZ)(c.OrganizationProfileContext.Provider,{value:i,children:(0,a.tZ)("div",{children:(0,a.tZ)(eE,{...i})})})})}}}]);